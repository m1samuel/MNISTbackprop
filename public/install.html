<!DOCTYPE html>

<html>
    <head>
        <title>P3DFFT</title>
        <meta charset="UTF-8">
        <meta name="DESCRIPTION" content="P3DFFT">
        <meta name="KEYWORDS" content="P3DFFT">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/mystyle.css" type="text/css">
    </head>
    <body>
        <header id="heading">
            <h1>P3DFFT<br/><span class="slogan">Scalable Framework for Three-dimensional Fourier
                Transforms</span></h1>
        </header>
        <div class="nav">
            <ul>
                <li><a href="index.html">Home</a></li>       
                <li><a href="https://github.com/sdsc/p3dfft">Github</a></li>
                <li><a href="install.html">Install</a></li>
                <li><a href="userguide.html">User Guide</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>      
        </div>
<h2><a name="Installing_P3DFFT"></a>Installing P3DFFT<a href="#Installing_P3DFFT" class="section_anchor"></a></h2><p>The latest version of P3DFFT can be found here. Once you have extracted the package, you must take the following steps to complete the setup:   <ol><li>Run the configure script </li><li>Run &#x27;make&#x27; </li><li>Run &#x27;make install&#x27; </li></ol></p><h1><a name="How_to_compile_P3DFFT"></a>How to compile P3DFFT<a href="#How_to_compile_P3DFFT" class="section_anchor"></a></h1><p>P3DFFT uses a configure script to create Makefiles for compiling the library as well as several examples. This page will step you through the process of running the configure script properly. </p><p>Run &quot;configure --help&quot; for complete list of options. Recommended options: --enable-stride1. For Cray XT platforms also recommended --enable-useeven. </p><p>Currently the package supports four compiler suites: PGI, Intel, IBM and GNU. Some examples of compiling on several systems are given below. Users may need to customize as needed. If you wish to share more examples or to request or contribute in support for other compilers, please write to dmitry@sdsc.edu. If you give us an account on your system we will work with you to customize the installation. </p><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Argument</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Notes </strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --prefix=PREFIX </td><td style="border: 1px solid #ccc; padding: 5px;"> Mandatory for users without access to /usr/local </td><td style="border: 1px solid #ccc; padding: 5px;"> This argument will install p3dfft to PREFIX when you run make install. By default, configure will install to /usr/local </td><td style="border: 1px solid #ccc; padding: 5px;"> --prefix=$HOME/local/ </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-gnu, --enable-ibm, --enable-intel, --enable-pgi, --enable-cray </td><td style="border: 1px solid #ccc; padding: 5px;"> Mandatory </td><td style="border: 1px solid #ccc; padding: 5px;"> These arguments will prepare p3dfft to be built by a specific compiler. You must only choose one option. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-pgi </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-fftw, --enable-essl </td><td style="border: 1px solid #ccc; padding: 5px;"> Mandatory </td><td style="border: 1px solid #ccc; padding: 5px;"> These arguments will prepare p3dfft to be used with either the FFTW or ESSL library. You must only choose one option. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-fftw </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --with-fftw= <i>FFTWLOCATION</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> Mandatory if --enable-fftw is used </td><td style="border: 1px solid #ccc; padding: 5px;"> This argument specifies the path location for the FFTW library; it is mandatory if you are planning to use p3dfft with the FFTW library. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-fftw --with-fftw=$FFTW_HOME </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-oned </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, </td><td style="border: 1px solid #ccc; padding: 5px;"> This argument is for 1D decomposition. The default is 2D decomposition but can be made to 1D by setting up a grid 1xn when running the code. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-oned </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-estimate </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, use only with --enable-fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> If this argument is passed, the FFTW library will not use run-time tuning to select the fastest algorithm for computing FFTs. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-estimate </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-measure </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, enabled by default, use only with --enable-fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> For search-once-for-the-fast algorithm (takes more time on p3dfft_setup()). </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-measure </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-patient </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, use only with --enable-fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> For search-once-for-the-fastest-algorithm (takes much more time on p3dfft_setup()). </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-patient </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-dimsc </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> To assign processor rows and columns in the Cartesian processor grid according to C convention. The default is Fortran convention which is recommended. This option does not affect the order of storage of arrays in memory. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-dimsc </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-useeven </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, recommended for Cray XT </td><td style="border: 1px solid #ccc; padding: 5px;"> This argument is for using MPI_Alltoall instead of MPI_Alltotallv. This will pad the send buffers with zeros to make them of equal size; not needed on most architecture but may lead to better results on Cray XT. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-useeven </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-stride1 </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, recommended </td><td style="border: 1px solid #ccc; padding: 5px;"> To enable stride-1 data structures on output (this may in some cases give some advantage in performance). You can define loop blocking factors NLBX and NBLY to experiment, otherwise they are set to default values. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-stride1 </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nblx </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> To define loop blocking factor NBL_X </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nblx=32 </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nbly1 </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> To define loop blocking factor NBL_Y1 </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nbly1=32 </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nbly2 </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> To define loop blocking factor NBL_Y2 </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nbly2=32 </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nblz </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> To define loop blocking factor NBL_Z </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-nblz=32 </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> --enable-single </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> This argument will compile p3dfft in single-precision. By default, configure will setup p3dfft to be compiled in double-precision. </td><td style="border: 1px solid #ccc; padding: 5px;"> --enable-single </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> FC=&lt;Fortran compiler&gt; </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> Fortran compiler </td><td style="border: 1px solid #ccc; padding: 5px;"> FC=mpfort </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> FCFLAGS=&quot;&lt;Fortran compiler flags&gt;&quot; </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, recommended </td><td style="border: 1px solid #ccc; padding: 5px;"> Fortran compiler flags </td><td style="border: 1px solid #ccc; padding: 5px;"> FCFLAGS=&quot;-Mextend&quot; </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> CC=&lt;C compiler&gt; </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional </td><td style="border: 1px solid #ccc; padding: 5px;"> C compiler </td><td style="border: 1px solid #ccc; padding: 5px;"> CC=mpcc </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> CFLAGS=&quot;&lt;C compiler flags&gt;&quot; </td><td style="border: 1px solid #ccc; padding: 5px;"> Optional, recommended </td><td style="border: 1px solid #ccc; padding: 5px;"> C compiler flags </td><td style="border: 1px solid #ccc; padding: 5px;"> CFLAGS=&quot;-fastsse&quot; </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> LDFLAGS=&quot;&lt;linker flags&gt;&quot; </td><td style="border: 1px solid #ccc; padding: 5px;"> Mandatory (depending on platform) </td><td style="border: 1px solid #ccc; padding: 5px;"> Linker flags </td><td style="border: 1px solid #ccc; padding: 5px;"> LDFLAGS=-lmpi_f90 -lmpi_f77&quot; </td></tr> </table></p><h1><a name="Compiling_on_Gordon/Trestles_(SDSC)"></a>Compiling on Gordon/Trestles (SDSC)<a href="#Compiling_on_Gordon/Trestles_(SDSC)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> PGI </td><td style="border: 1px solid #ccc; padding: 5px;"> pgi, fftw, mvapich2_ib </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-pgi --enable-fftw --with-fftw=$FFTWHOME FC=mpif90 CC=mpicc </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Intel </td><td style="border: 1px solid #ccc; padding: 5px;"> intel, fftw, mvapich2_ib </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-intel --enable-fftw --with-fftw=$FFTWHOME FC=mpif90 CC=mpicc</td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> GNU </td><td style="border: 1px solid #ccc; padding: 5px;"> gnu, fftw, mvapich2_ib </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-intel --enable-fftw --with-fftw=$FFTWHOME FC=mpif90 CC=mpicc </td></tr>   </table></p><h1><a name="Compiling_on_Triton_(SDSC)"></a>Compiling on Triton (SDSC)<a href="#Compiling_on_Triton_(SDSC)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> PGI </td><td style="border: 1px solid #ccc; padding: 5px;"> pgi, fftw, mpi </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-pgi --enable-fftw --with-fftw=&quot;$FFTWHOME&quot; FCFLAGS=&quot;-fastsse -tp barcelona-64 -Mpreprocess&quot; CFLAGS=&quot;-fastsse -tp barcelona-64&quot; LDFLAGS=&quot;-lmpi_f90 -lmpi_f77 -lmyriexpress&quot; </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Intel </td><td style="border: 1px solid #ccc; padding: 5px;"> intel, fftw, mpi </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-intel --enable-fftw --with-fftw=&quot;$FFTWHOME&quot; FCFLAGS=&quot;-O3 -xW -132 -fpp&quot; CFLAGS=&quot;-O3 -xW&quot; LDFLAGS=&quot;-lmpi_f90 -lmpi_f77 -lmyriexpress -limf&quot; </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> GNU </td><td style="border: 1px solid #ccc; padding: 5px;"> gnu, fftw, mpi </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-gnu --enable-fftw --with-fftw=&quot;$FFTWHOME&quot; LDFLAGS=&quot;-lmpi_f90 -lmpi_f77&quot; </td></tr> </table></p><h1><a name="Compiling_on_IBM_Power7"></a>Compiling on IBM Power7<a href="#Compiling_on_IBM_Power7" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> mpfort </td><td style="border: 1px solid #ccc; padding: 5px;"> essl </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure FC=mpfort FCFLAGS=&quot;-qcclines -qarch=pwr7 -qstrict -qnosave -qtune=pwr7 -qhot -qsimd=auto -qcache=auto -qsmp=omp -qthreaded -O3 -q64 -qfloat=hsflt:fltint&quot; CC=mpcc CFLAGS=&quot;-q64 -DNUS_XCOMP&quot; CPP=/usr/bin/cpp --enable-essl --enable-ibm --host=&quot;bd-login&quot; </td></tr> </table></p><h1><a name="Compiling_on_Stampede_(TACC)"></a>Compiling on Stampede (TACC)<a href="#Compiling_on_Stampede_(TACC)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Intel </td><td style="border: 1px solid #ccc; padding: 5px;"> fftw3 </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-fftw --enable-intel --with-fftw=$TACC_FFTW3_DIR FC=mpif90 CC=mpicc</td></tr> </table></p><h1><a name="Compiling_on_Hopper_(NERSC)"></a>Compiling on Hopper (NERSC)<a href="#Compiling_on_Hopper_(NERSC)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> PGI </td><td style="border: 1px solid #ccc; padding: 5px;"> PrgEnv-pgi, fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-pgi --enable-fftw --with-fftw=$FFTW_DIR/.. FC=ftn CC=cc </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Intel </td><td style="border: 1px solid #ccc; padding: 5px;"> PrgEnv-intel, fftw</td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-intel --enable-fftw --with-fftw=$FFTW_DIR/.. FC=ftn CC=cc</td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> GNU </td><td style="border: 1px solid #ccc; padding: 5px;"> PrgEnv-gnu, fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-gnu --enable-fftw --with-fftw=$FFTW_DIR/.. FC=ftn CC=cc</td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Cray </td><td style="border: 1px solid #ccc; padding: 5px;"> PrgEnv-cray, fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-cray --enable-fftw --with-fftw=$FFTW_DIR/.. FC=ftn CC=cc</td></tr> </table></p><h1><a name="Compiling_on_Blacklight_(PSC)"></a>Compiling on Blacklight (PSC)<a href="#Compiling_on_Blacklight_(PSC)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Modules</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> Intel </td><td style="border: 1px solid #ccc; padding: 5px;"> fftw </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-fftw --enable-intel --with-fftw=$FFTW_LIB/.. CC=icc FC=ifort FCFLAGS=-lmpi</td></tr> </table></p><h1><a name="Compiling_on_Mira/Cetus/Vesta_(ALCF)"></a>Compiling on Mira/Cetus/Vesta (ALCF)<a href="#Compiling_on_Mira/Cetus/Vesta_(ALCF)" class="section_anchor"></a></h1><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Compiler</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Arguments</strong> </td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> IBM XL  </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-ibm --enable-essl --with-essl=/soft/libraries/essl/current FC=mpixlf90_r CC=mpixlc_r</td></tr> <tr><td style="border: 1px solid #ccc; padding: 5px;"> GNU  </td><td style="border: 1px solid #ccc; padding: 5px;"> ./configure --enable-gnu --enable-fftw --with-fftw=/soft/libraries/alcf/current/{xl,gcc}/FFTW3 FC=mpif90 CC=mpicc</td></tr> </table></p>
</html>